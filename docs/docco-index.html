<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', function() {
    var titles = Array.prototype.slice.call(document.querySelectorAll('[id^="section-"] h1'), 0);
    var html = '<li class="docco-index"><div class="annotation"><ul>';
    titles.forEach(function(title) {
      html += '<li><a href="#' + title.id + '">' + title.innerHTML.replace(/pie\s/i, '') + '</a></li>';
    });

    html += "</ul></div></li>";

    var newEl = document.createElement('div');
    newEl.innerHTML = html;
    newEl = newEl.firstElementChild;

    var title = document.querySelector('#title');
    title.parentNode.insertBefore(newEl, title.nextSibling);
  });
</script>
